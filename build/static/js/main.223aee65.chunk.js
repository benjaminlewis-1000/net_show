(this.webpackJsonpslideshow=this.webpackJsonpslideshow||[]).push([[0],{24:function(e,t,a){e.exports=a(69)},29:function(e,t,a){},31:function(e,t,a){},60:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(21),r=a.n(i),o=(a(29),a(3)),c=a.n(o),l=a(10),u=a(6),h=a(7),m=a(5),d=a(9),_=a(8),g=(a(31),a(2)),p=a.n(g),k=a(22),f=a.n(k);p.a.set("username","benjamin"),p.a.set("pass","L0TRswhp");var v=a(23),y=a.n(v),b=(a(60),function(e){Object(d.a)(a,e);var t=Object(_.a)(a);function a(e){var s;Object(u.a)(this,a),s=t.call(this,e);var n=0,i=e.base_url+"api/keyed_image/slideshow/?id=";e.image_ids.length>1&&(n=1);var r=i+e.image_ids[0]+"&access_key="+e.img_access_key,o=i+e.image_ids[n]+"&access_key="+e.img_access_key,c={animationDuration:2*e.slide_len+"s"};return s.state={idx_tik:0,url_tik:r,idx_tok:n,url_tok:o,index:n,move:!1,image_ids:e.image_ids,img_access_key:e.img_access_key,base_url:i,tiktok:!1,slide_len:e.slide_len,css:c},s.construct_url=s.construct_url.bind(Object(m.a)(s)),s}return Object(h.a)(a,[{key:"getNextIndex",value:function(e){return e>=this.state.image_ids.length-1?0:e+1}},{key:"construct_url",value:function(e){return this.state.base_url+this.props.image_ids[e]+"&access_key="+this.state.img_access_key}},{key:"tick",value:function(){var e=this.getNextIndex(this.state.index);this.setState({index:e});var t=this.construct_url(e);this.state.tiktok?(this.setState({idx_tik:e}),this.setState({url_tik:t})):(this.setState({idx_tok:e}),this.setState({url_tok:t})),this.setState({tiktok:!this.state.tiktok})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),1e3*this.state.slide_len)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return n.a.createElement("div",{className:"mask"},n.a.createElement("div",{className:"pic-wrapper"},n.a.createElement("img",{className:this.state.tiktok?"hidden":"visible",src:this.state.url_tik,alt:"",style:this.state.css}),n.a.createElement("img",{className:this.state.tiktok?"visible":"hidden",src:this.state.url_tok,alt:"",style:this.state.css})))}}]),a}(n.a.Component));function w(e){for(var t,a,s=e.length;0!==s;)a=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[a],e[a]=t;return e}p.a.set("base_url","https://picasa.exploretheworld.tech/");var x=function(e){Object(d.a)(a,e);var t=Object(_.a)(a);function a(e){var s;Object(u.a)(this,a),(s=t.call(this,e)).login=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){setTimeout((function(){s.state.axiosInstance.post(s.state.token_url,{username:s.state.username,password:s.state.password},{headers:{"content-type":"application/json"}}).then((function(t){return p.a.set("access_token","JWT "+t.data.access.replace(/['"]+/g,"")),s.setState({username:"removed"}),s.setState({password:"removed"}),e()}))}),1e3)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),s.getAccessKey=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){s.state.axiosInstance.get(s.state.param_url,{headers:{Authorization:p.a.get("access_token")}}).then((function(t){return s.setState({img_access_key:t.data.random_access_key}),e()}),(function(e){console.log(e)})).catch((function(e){console.log(e)}))})),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),s.getList=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){s.state.axiosInstance.get(s.state.list_url,{headers:{Authorization:p.a.get("access_token")}}).then((function(t){var a=t.data.url_keys;return console.log(a.length),s.state.shuffle&&w(a),s.setState({image_ids:a}),e()}),(function(e){console.log(e)})).catch((function(e){console.log(e)}))})),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));var n=window.location.search,i=new URLSearchParams(n),r=i.get("slide_len");if(null===r&&(r=6),null===i.get("help"))var o=!1;else o=!0;var h=p.a.get("base_url"),d=f.a.create({timeout:6e4,headers:{Authorization:"TBD","Content-Type":"application/json",accept:"application/json"}});return s.state={password:p.a.get("pass"),username:p.a.get("username"),token_url:h+"api/token/obtain/",param_url:h+"api/parameters",list_url:h+"api/image_list/"+n,base_url:h,loading:!0,axiosInstance:d,slide_len:r,help:o,shuffle:null===i.get("cronological")},s.changeImage=s.changeImage.bind(Object(m.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.login().then((function(){e.getList().then((function(){e.getAccessKey().then((function(){var t=e.state.base_url+"api/keyed_image/slideshow/?id="+e.state.image_ids[0]+"&access_key="+e.state.img_access_key;e.setState({image_url:t}),e.setState({imageIndex:0}),e.setState({loading:!1}),e.state.help||(document.body.style.backgroundColor="black")}))}))}))}},{key:"changeImage",value:function(){if(this.state.imageIndex===this.state.image_ids.length-1)var e=0;else e=this.state.imageIndex+1;var t=this.state.base_url+"api/keyed_image/slideshow/?id="+this.state.image_ids[e]+"&access_key="+this.state.img_access_key;this.setState({image_url:t}),this.setState({imageIndex:e})}},{key:"render",value:function(){return n.a.createElement("div",null,this.state.help?n.a.createElement("div",{className:"loader"},n.a.createElement("p",null,"Hey there! You are looking for help. "),n.a.createElement("p",null,"A few commands. You can pass URL parameters (after /?) with the following: "),n.a.createElement("p",null,"people=<a comma-separated list of people>"),n.a.createElement("p",null,"slide_len=<length of each slide in seconds>"),n.a.createElement("p",null,"help -- this page"),n.a.createElement("p",null,"year_start=<year> and/or year_end=<year>"),n.a.createElement("p",null,"No arguments -- Slideshow of all photos"),n.a.createElement("p",null,"cronological -- Photos stay in chronological order")):n.a.createElement("div",null,this.state.loading?n.a.createElement("div",{className:"loader"},n.a.createElement(y.a,{size:500,color:"#9df2f2",loading:this.state.loading,speedMultiplier:.2})):n.a.createElement("div",null,n.a.createElement(b,{source:this.state.image_url,image_ids:this.state.image_ids,img_access_key:this.state.img_access_key,base_url:this.state.base_url,slide_len:this.state.slide_len}))))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.223aee65.chunk.js.map